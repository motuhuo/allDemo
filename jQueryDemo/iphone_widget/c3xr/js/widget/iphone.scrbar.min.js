(function(h){h.fn.extend({scrbar:function(b){function u(E){a.off("off",u).off("offset",v).off("reset",w);a.off("touchstart",x).off("touchmove",y).off("touchend",z);clearInterval(A)}function v(E,a){0!=a&&(l=0<a?1:-1,c+=a,q())}function w(a){l=c=0;q()}function B(){g=d.outerHeight();r!=g&&(r=g,C?f.css({y:-d.position().top/(d.outerHeight()-a.height())*(a.height()-f.outerHeight())}):f.css({height:a.height()/d.outerHeight()*e.height(),y:-d.position().top/(d.outerHeight()-a.height())*(a.height()-f.outerHeight())}),m=a.height()-f.outerHeight(),g<=a.height()?(k=!1,e.hide()):(k=!0,e.show(),n&&e.css({opacity:0})))}function x(a){k&&(p=[a.originalEvent.touches[0].clientX,a.originalEvent.touches[0].clientY],n&&e.transition({opacity:1},250))}function y(a){a.preventDefault();a.stopPropagation();k&&(l=0<a.originalEvent.touches[0].clientY-p[1]?-1:1,c-=(a.originalEvent.touches[0].clientY-p[1])*D,p=[a.originalEvent.touches[0].clientX,a.originalEvent.touches[0].clientY],q())}function z(a){k&&n&&e.transition({opacity:0},250)}function q(){c=c>m?m:c;c=0>c?0:c;f.css({y:c});var b=c/m;d.css({y:-b*(g-a.height())});t&&t(b,l,a)}var a=h(this),d,e,f,c,k,g,r,A,p=[],C=!1,D=1,m,l=0,t,n=!1;b&&(C=null!=b.static?b.static:!1,D=null!=b.speed?b.speed:1,t=b.onScroll,n=null!=b.panelFade?b.panelFade:!1);c=0;d=a.children(".cont");e=a.children(".panel");f=e.children();a.on("off",u).on("offset",v).on("reset",w);a.on("touchstart",x).on("touchmove",y).on("touchend",z);r=g=0;B();A=setInterval(B,500)},scrbarReset:function(){h(this).triggerHandler("reset")},scrbarOffset:function(b){b&&h(this).triggerHandler("offset",[b])},scrbarOff:function(){h(this).triggerHandler("off")}})})(jQuery);