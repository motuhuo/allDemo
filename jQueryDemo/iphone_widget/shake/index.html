<!DOCTYPE html>
<html>
<head>
<title>摇一摇</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,target-densitydpi=device-dpi,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<link rel="stylesheet" type="text/css" href="../../iphone/css/common.css" />
<style>

article.shake{ background-color:#262626; position:absolute; left:0; top:0; width:100%; height:100%;}
article.shake h4{ display:block; width:2.5rem; height:3.6rem; margin:1.6rem auto .6rem; position:relative;}
article.shake h4 img{ position:absolute; left:0; top:0; width:2.5rem; height:3.6rem; -webkit-transform-origin:center bottom;}
article.shake h4 img.active{ -webkit-animation:shake 0.5s 0s ease infinite; opacity:1;}
article.shake p{ font-size:.32rem; line-height:.38rem; color:#fff; text-align:center;}

#shakeCount{position:absolute; right:0; top:0; width: 30%; height: .8rem; line-height: .8rem; font-size: .26rem; padding:0 .1rem; background:#000; text-align: center; color: #fff; z-index:99;}
#shakeLevel{position:absolute; right:0; top:1rem; width: 30%; height: .8rem; line-height: .8rem; font-size: .26rem;  padding:0 .1rem; background:#000; text-align: center; color: #fff; color: #fff;z-index:99;}

@-webkit-keyframes shake{
	0%{ -webkit-transform:rotate(0);}
	25%{ -webkit-transform:rotate(30deg);}
	50%{-webkit-transform:rotate(0);}
	75%{ -webkit-transform:rotate(-30deg);}
	100%{-webkit-transform:rotate(0);}
}

</style>
</head>
<body>
<!--------------------------------------------------------------html区域-------------------------------------------------------------------------------------->
<article class="shake">
	<h4><img src="images/card/shake.png" class="shake"></h4>
  	<p>摇动手机，<br>乐高魔粒告诉你2015如何转运！</p>
</article>
<div id="shakeCount">摇晃次数：0</div>
<div id="shakeLevel">摇晃强度：0</div>

<!--------------------------------------------------------------javascript区域-------------------------------------------------------------------------------------->
<script type="text/javascript" src="../../iphone/js/base/framwork.js"></script>
<script type="text/javascript" src="../../iphone/js/base/shake.js"></script>
<script>

	/*ishake 方法集说明
	 * 
	 * on(option):开启震动
		 * 参数：
		 * max:触发complete的阀值，默认值10
		 * hold:触发摇晃一次的距离值，默认值100，数值越大需要摇的越厉害
		 * type:默认值1
			 * 1：根据摇晃强度触发compelet事件，如果间断摇晃会让强度值回归到0
			 * 2：根据摇晃次数触发compelet事件，只要摇晃到max次数就可以触法complete
			 * 3：同时满足摇晃强度和摇晃次数，才可触发compelet事件
		 * onStart:开始摇晃的callback
		 * onCount:摇晃次数的callback,返回当前摇晃次数
		 * onLevel:摇晃强度的callback,返回当前摇晃强度
		 * onComplete:触发摇晃阀值的callback
		 * onStop:停止摇晃的callback
	 * 
	 * off()：关闭震动
	 * 
	 */





$(document).ready(function(e) {

	//shake
	var btnStart=$('a.btnStart');
	var shakeBox=$('article.shake');
	var countBox=$('#shakeCount');
	var levelBox=$('#shakeLevel');
	var shakeImg=$('img.shake');
	
	init();
	
	function init(){
		ishake.on({max:20,hold:150,onStart:shakeStart,onCount:shakeCount,onLevel:shakeLevel,onComplete:shakeComplete,onStop:shakeStop});
		
		//手动关闭震动
//		setTimeout(function(){
//			ishake.off();
//			alert('关闭震动');
//		},1000);

	}//end init
	
	function shakeCount(id){
		countBox.html('摇晃次数：'+id);
	}//end func
	
	function shakeLevel(id){
		levelBox.html('摇晃强度：'+id);
		if(id>=5){
			shakeImg.addClass('active');
		}//end if
	}//end func
	
	function shakeStart(shake){
	}//end func
	
	function shakeComplete(){	
		alert('shakeComplete');
	}//end func
	
	function shakeStop(){
		shakeImg.removeClass('active');
	}//end func

	
});
</script>
</body>
</html>