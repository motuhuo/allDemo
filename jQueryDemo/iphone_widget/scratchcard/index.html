<!DOCTYPE html>
<html>
<head>
<title>刮刮卡</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,target-densitydpi=device-dpi,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<link rel="stylesheet" type="text/css" href="../../iphone/css/common.css" />
<style>
article{ width:100%; height:100%; position:relative; background-size:100% 100%;}
article.ticket{ background-image:url(images/ticket/bg.jpg);}
article.ticket img.slog{ position:absolute; left:50%; top:4%; width:80%; margin-left:-40%;}
#ticketResult{ position: absolute; left: 50%; top: 36%; width:70%; margin-left: -35%; background:#fff; padding:.8rem 0; visibility:hidden; position: relative;}
#ticketResult p.code{ text-align:center; font-size:.32rem; color:#333; margin-bottom: .4rem;}
#ticketResult p.sign{ text-align:center; font-size:.36rem; color:#888; visibility: hidden;}
#ticketResult canvas{ position: absolute; left: 0; top: 0;}


</style>
</head>
<body>
<article class="ticket">
    <div id="ticketResult">
        <p class="code" contenteditable="true">JD6841-2346-8976-2234</p>
        <p class="sign" id="ticketSign">长按复制</p>
    </div>
</article>      
<script type="text/javascript" src="../../iphone/js/base/framwork.js"></script>
<script type="text/javascript" src="js/widget/iphone.scratch.js"></script>
<script>
$(document).ready(function(e) {
	
	/*
	 * scratchOn(mask,option):开启插件
		 * 参数：
		 * mask：蒙版的图片路径，必填项
		 * option.left：剩余多少有效像素后触发刮刮卡刮刮完成，默认值0.36
		 * option.line：涂抹的线条宽度，默认值40
		 * option.shell：父容器对象，默认值$('body')
		 * option.onComplete：刮刮完成后的callback
		 * option.onOff:插件关闭的回调函数,传递引用插件的jquery对象
	 * 
	 */
	
	//ticket
	var ticketCode;
	var ticketBox=$('section.ticket');
	var ticketInput=$('input[name=ticket]')
	var ticketResult=$('#ticketResult');
	var ticketSign=$('#ticketSign');
	
	ticketResult.scratchOn('images/ticket/mask.png',{onComplete:scratchComplete});
	
	function scratchComplete(){
		console.log('scratchComplete');
		ticketSign.css({visibility:'visible'});
	}//end func

	
});
</script>
</body>
</html>
